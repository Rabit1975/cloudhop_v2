---
description: A component to protect routes, ensuring only authenticated and authorized users can access specific parts of an application.
labels: ['routing', 'authentication', 'authorization', 'security']
---

The ProtectedRoute component safeguards your application routes by checking user authentication status and, optionally, their roles. If the user is not authenticated or lacks the necessary permissions, they are redirected to a specified path.

### Basic Protected Route

This example shows how to use ProtectedRoute to render content only when a user is authenticated. When a valid user object is provided, the protected content is displayed.

```tsx
import { ProtectedRoute } from '@cloudrabbit/cloudhop-platform.routing.protected-route';
import { User, UserRole } from '@cloudrabbit/cloudhop-platform.entities.user';
const MockAuthenticatedContent = () => (
  <div style={{ padding: '20px', background: '#e0ffe0', border: '1px solid green' }}>
    <p>Welcome, authenticated user!</p>
  </div>
);
const baseUser = new User('user-1', 'john.doe', 'John Doe', 'john@example.com', [UserRole.User]);
// In a real application, the user would come from useAuth() hook
// For documentation purposes, we pass a testUser.
<ProtectedRoute testUser={baseUser}>
  <MockAuthenticatedContent />
</ProtectedRoute>
```
### Unauthenticated User Redirection
This example demonstrates how an unauthenticated user attempting to access a protected route is redirected. The `redirectTo` prop specifies where the user should be sent.
```tsx
import { ProtectedRoute } from '@cloudrabbit/cloudrabbit-platform.routing.protected-route';
import { MemoryRouter, Routes, Route } from 'react-router-dom';
const UnauthenticatedContent = () => (
  <div style={{ padding: '20px', background: '#ffe0e0', border: '1px solid red' }}>
    <p>You need to log in to view this content.</p>
  </div>
);
const LoginPage = () => (
  <div style={{ padding: '20px', background: '#e0e0ff', border: '1px solid blue' }}>
    <p>This is the login page.</p>
  </div>
);
// MemoryRouter is used for isolated routing in examples
<MemoryRouter initialEntries={['/dashboard']}>
  <Routes>
    <Route path="/login" element={<LoginPage />} />
    <Route
      path="/dashboard"
      element={
        <ProtectedRoute redirectTo="/login">
          <UnauthenticatedContent />
        </ProtectedRoute>
      }
    />
  </Routes>
</MemoryRouter>
```
### Role Based Access
This example illustrates restricting access to a route based on the user's role. Here, a user with the 'user' role tries to access a route that requires an 'admin' role, leading to a redirection.
```tsx
import { ProtectedRoute } from '@cloudrabbit/cloudhop-platform.routing.protected-route';
import { User, UserRole } from '@cloudrabbit/cloudhop-platform.entities.user';
import { MemoryRouter, Routes, Route } from 'react-router-dom';
const AdminPanel = () => (
  <div style={{ padding: '20px', background: '#e0ffe0', border: '1px solid green' }}>
    <p>Welcome to the admin panel!</p>
  </div>
);
const AccessDeniedPage = () => (
  <div style={{ padding: '20px', background: '#ffe0e0', border: '1px solid red' }}>
    <p>Access denied. You do not have the required role.</p>
  </div>
);
const regularUser = new User('user-2', 'jane.doe', 'Jane Doe', 'jane@example.com', [UserRole.User]);
<MemoryRouter initialEntries={['/admin']}>
  <Routes>
    <Route path="/access-denied" element={<AccessDeniedPage />} />
    <Route
      path="/admin"
      element={
        <ProtectedRoute testUser={regularUser} allowedRoles={['admin']} redirectTo="/access-denied">
          <AdminPanel />
        </ProtectedRoute>
      }
    />
  </Routes>
</MemoryRouter>