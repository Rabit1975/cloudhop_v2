---
description: A React Hook for fetching and managing user game activity data. It exposes functions for listing a user's game activities and logging new activities like game played or achievement unlocked.
labels: ['hook', 'react', 'gamehub', 'activity']
---

A React Hook for fetching and managing user game activity data. It exposes functions for listing a user's game activities and logging new activities like game played or achievement unlocked using GraphQL mutations.

## Usage

### Fetching game activities

This example shows how to use the useGameActivity hook to fetch and display a user's game activities. It displays a loading state, errors, and the list of activities.

```tsx
const GameActivityViewer = () => {
  // In a real application, userId would come from authentication context
  const { activities, loading, error } = useGameActivity({ userId: 'user123' });
  if (loading) return <p>Loading activities...</p>;
  if (error) return <p>Error loading activities: {error.message}</p>;
  return (
    <div>
      <h2>User Game Activities</h2>
      {activities.length === 0 ? (
        <p>No activities found.</p>
      ) : (
        <ul>
          {activities.map((activity, index) => (
            <li key={index}>
              {activity.type === 'played'
                ? `Played ${activity.gameId} with score ${activity.details.score}`
                : `Unlocked achievement ${activity.details.achievementId} in ${activity.gameId}`}
              {' '}at {new Date(activity.timestamp).toLocaleString()}
            </li>
          ))}
        </ul>
      )}
    </div>
  );
};
```
### Logging a played game
This example demonstrates how to log a new game played activity, including a score, using the logActivity function provided by the hook. It handles potential errors during the logging process.
```tsx
const GameLogger = () => {
  // userId is needed for the logActivity payload
  const { logActivity, loading, error } = useGameActivity(); 
  const handleLogPlayedGame = async () => {
    try {
      await logActivity({
        userId: 'user456', // User who played the game
        gameId: 'super-mario-world',
        type: 'played',
        timestamp: new Date().toISOString(),
        details: { score: 1500 },
      });
      alert('Game played activity logged successfully!');
    } catch (err) {
      alert(`Failed to log game played: ${err.message}`);
    }
  };
  return (
    <div>
      <h3>Log Game Played</h3>
      <button onClick={handleLogPlayedGame} disabled={loading}>
        {loading ? 'Logging...' : 'Log Super Mario World Played'}
      </button>
      {error && <p style={{ color: 'red' }}>Error: {error.message}</p>}
    </div>
  );
};
```
### Logging an achievement
This example illustrates how to log an achievement unlocked activity for a user. It calls the logActivity function with the achievement details and shows an alert on success or failure.
```tsx
const AchievementLogger = () => {
  const { logActivity, loading, error } = useGameActivity();
  const handleLogAchievement = async () => {
    try {
      await logActivity({
        userId: 'user456', // User who unlocked the achievement
        gameId: 'zelda-ocarina-of-time', // Game where achievement was unlocked
        type: 'achieved',
        timestamp: new Date().toISOString(),
        details: { achievementId: 'master-swordsman' },
      });
      alert('Achievement logged successfully!');
    } catch (err) {
      alert(`Failed to log achievement: ${err.message}`);
    }
  };
  return (
    <div>
      <h3>Log Achievement</h3>
      <button onClick={handleLogAchievement} disabled={loading}>
        {loading ? 'Logging...' : 'Award Master Swordsman Achievement'}
      </button>
      {error && <p style={{ color: 'red' }}>Error: {error.message}</p>}
    </div>
  );
};