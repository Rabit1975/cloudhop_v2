---
description: A React Hook for managing HopHub messages within a conversation, including fetching, sending, and marking as read.
labels: ['hook', 'react', 'messages', 'chat', 'hophub']
---

### Fetching conversation messages

This example demonstrates how to use useListMessages to fetch messages for a specific conversation. It shows how to display messages and handle loading states.

```tsx
const MessageList = ({ conversationId }) => {
  const { messages, loading, error } = useListMessages({ conversationId });
  if (loading) return <p>Loading messages...</p>;
  if (error) return <p>Error: {error.message}</p>;
  if (!messages || messages.length === 0) return <p>No messages yet.</p>;
  return (
    <div>
      <h2>Messages</h2>
      {messages.map((msg) => (
        <div key={msg.id}>
          <strong>{msg.senderId}:</strong> {msg.text}
        </div>
      ))}
    </div>
  );
};
```
### Sending a new message
This example shows how to use useSendMessage to send a text message to a conversation. It includes handling the asynchronous send operation.
```tsx
const MessageInputExample = ({ conversationId }) => {
  const { sendMessage, loading, error } = useSendMessage();
  const handleSendMessage = async (textValue) => {
    if (!textValue.trim()) return;
    try {
      await sendMessage({
        conversationId,
        text: textValue,
      });
      // In a real application, you would clear the input field after sending.
    } catch (err) {
      console.error('Failed to send message:', err);
    }
  };
  return (
    <div>
      <input type="text" placeholder="Type your message..." />
      <button onClick={() => handleSendMessage("Hello from docs!")} disabled={loading}>
        {loading ? 'Sending...' : 'Send "Hello from docs!"'}
      </button>
      {error && <p style={{ color: 'red' }}>Error sending message: {error.message}</p>}
    </div>
  );
};
```
### Marking messages as read
This example illustrates how to use useMarkMessagesAsRead to update the read status of messages in a conversation. This is useful for managing unread counts.
```tsx
const ReadStatusUpdater = ({ conversationId, lastMessageId }) => {
  const { markMessagesAsRead, loading, error, data } = useMarkMessagesAsRead();
  const handleMarkAsRead = async () => {
    try {
      await markMessagesAsRead({
        conversationId,
        lastReadMessageId: lastMessageId,
      });
      // In a real application, you might show a success message or update other UI elements.
    } catch (err) {
      console.error('Failed to mark messages as read:', err);
    }
  };
  return (
    <div>
      <button onClick={handleMarkAsRead} disabled={loading}>
        {loading ? 'Updating...' : 'Mark All As Read'}
      </button>
      {error && <p style={{ color: 'red' }}>Error marking messages as read: {error.message}</p>}
      {data && !loading && <p>Unread count after update: {data.unreadCount}</p>}
    </div>
  );
};