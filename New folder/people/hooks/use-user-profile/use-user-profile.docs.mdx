---
description: A React Hook for fetching and managing user profile data.
labels: ['hook', 'react', 'user', 'profile', 'graphql']
---

A React Hook for fetching and managing user profile data. It provides independent hooks for fetching a single user profile, listing multiple user profiles, and updating a user profile using GraphQL mutations.

## Usage

### Fetch a single user profile

This example demonstrates how to fetch and display a single user profile using the useUserProfile hook. It shows how to pass a userId and handle loading and error states.

```tsx
import { useUserProfile } from './use-user-profile.js';
// This is a simplified mock UserProfile structure for demonstration purposes.
// In a real application, you would use the actual UserProfile entity.
const MockUserProfile = {
  from: (data) => ({
    userId: data.userId,
    firstName: data.firstName,
    lastName: data.lastName,
    email: data.email,
    profilePicture: data.profilePicture,
    displayName: `${data.firstName} ${data.lastName}`,
    statusMessage: data.statusMessage,
  }),
};
const SingleUserProfileComponent = ({ userId }) => {
  const { userProfile, loading, error } = useUserProfile(userId, {
    mockData: MockUserProfile.from({
      userId: userId,
      firstName: 'Jane',
      lastName: 'Doe',
      email: 'jane.doe@example.com',
      profilePicture: 'https://example.com/avatar_jane.jpg',
      statusMessage: 'Online',
    }),
  });
  if (loading) return <p>Loading profile...</p>;
  if (error) return <p>Error loading profile: {error.message}</p>;
  if (!userProfile) return <p>No profile found.</p>;
  return (
    <div>
      <h2>{userProfile.displayName}</h2>
      <img src={userProfile.profilePicture} alt="Profile" width="50" height="50" />
      <p>Email: {userProfile.email}</p>
      <p>Status: {userProfile.statusMessage}</p>
    </div>
  );
};
```

### List multiple user profiles

This example illustrates how to fetch and display a list of user profiles using the useUserProfiles hook. It demonstrates how to use the hook with mock data and iterate through the profiles.

```tsx
import { useUserProfiles } from './use-user-profiles.js';
// This is a simplified mock UserProfile structure for demonstration purposes.
// In a real application, you would use the actual UserProfile entity.
const MockUserProfile = {
  from: (data) => ({
    userId: data.userId,
    firstName: data.firstName,
    lastName: data.lastName,
    email: data.email,
    profilePicture: data.profilePicture,
    displayName: `${data.firstName} ${data.lastName}`,
    statusMessage: data.statusMessage,
  }),
};
const UserProfilesListComponent = () => {
  const { userProfiles, loading, error } = useUserProfiles({
    mockData: [
      MockUserProfile.from({
        userId: 'user1',
        firstName: 'Alice',
        lastName: 'Smith',
        email: 'alice@example.com',
        profilePicture: 'https://example.com/avatar_alice.jpg',
        statusMessage: 'Active',
      }),
      MockUserProfile.from({
        userId: 'user2',
        firstName: 'Bob',
        lastName: 'Johnson',
        email: 'bob@example.com',
        profilePicture: 'https://example.com/avatar_bob.jpg',
        statusMessage: 'Busy',
      }),
    ],
  });
  if (loading) return <p>Loading profiles...</p>;
  if (error) return <p>Error loading profiles: {error.message}</p>;
  return (
    <div>
      <h2>All User Profiles</h2>
      {userProfiles.length === 0 && <p>No profiles found.</p>}
      <ul>
        {userProfiles.map((profile) => (
          <li key={profile.userId}>
            <img src={profile.profilePicture} alt="Profile" width="30" height="30" />
            {profile.displayName} ({profile.statusMessage})
          </li>
        ))}
      </ul>
    </div>
  );
};
```

### Update a user profile

This example shows how to update a user profile using the useUpdateUserProfile hook. It includes an input field and a button to trigger the update, as well as handling the loading and success states.

```tsx
import React, { useState } from 'react';
import { useUpdateUserProfile } from './use-update-user-profile.js';
// This is a simplified mock UserProfile structure for demonstration purposes.
// In a real application, you would use the actual UserProfile entity.
const MockUserProfile = {
  from: (data) => ({
    userId: data.userId || 'current_user',
    firstName: data.firstName,
    lastName: data.lastName,
    email: data.email,
    profilePicture: data.profilePicture,
    displayName: data.displayName || `${data.firstName} ${data.lastName}`,
    statusMessage: data.statusMessage,
  }),
};
const UpdateUserProfileComponent = () => {
  const [displayName, setDisplayName] = useState('');
  const [bio, setBio] = useState('');
  const [updateMessage, setUpdateMessage] = useState('');
  const { updateUserProfile, loading, error, data: updatedProfile } = useUpdateUserProfile();
  const handleUpdate = async () => {
    setUpdateMessage('');
    try {
      // Simulate a successful update by returning a mock UserProfile
      const result = await Promise.resolve(
        MockUserProfile.from({
          displayName: displayName || 'Updated User',
          bio: bio || 'New Bio',
          firstName: 'Updated',
          lastName: 'User',
          email: 'updated.user@example.com',
          profilePicture: 'https://example.com/avatar_updated.jpg',
          statusMessage: 'Online',
        })
      );
      setUpdateMessage(`Profile updated to: ${result.displayName}`);
    } catch (err) {
      setUpdateMessage(`Update failed: ${err.message}`);
    }
  };
  return (
    <div>
      <h2>Update Your Profile</h2>
      <div>
        <label>
          Display Name:
          <input
            type="text"
            value={displayName}
            onChange={(e) => setDisplayName(e.target.value)}
            disabled={loading}
          />
        </label>
      </div>
      <div>
        <label>
          Bio:
          <textarea
            value={bio}
            onChange={(e) => setBio(e.target.value)}
            disabled={loading}
          />
        </label>
      </div>
      <button onClick={handleUpdate} disabled={loading}>
        {loading ? 'Updating...' : 'Update Profile'}
      </button>
      {error && <p style={{ color: 'red' }}>Error: {error.message}</p>}
      {updateMessage && <p style={{ color: 'green' }}>{updateMessage}</p>}
      {updatedProfile && (
        <div>
          <h3>Current Profile Data</h3>
          <p>Display Name: {updatedProfile.displayName}</p>
          <p>Bio: {updatedProfile.bio}</p>
        </div>
      )}
    </div>
  );
};