---
description: A React Hook for fetching and managing content data in CloudHop spaces.
labels: ['hook', 'react', 'data-fetching', 'graphql', 'content']
---

A React Hook for fetching and managing content data in CloudHop spaces. It provides independent hooks for fetching a single content item, listing content items, creating, updating, and deleting content using GraphQL operations. It also handles loading and error states for each operation.

## Listing Content

This example demonstrates how to fetch a list of content items within a specified space. It displays content names and handles loading and error states.

```tsx
const MyContentList = () => {
  const { contents, loading, error } = useContentList({
    spaceId: 'my-space-id',
    // In a real application, you would omit mockData
    mockData: [
      { id: 'content-1', spaceId: 'my-space-id', title: 'First Post', body: 'Content of first post', type: 'blog', creatorId: 'user1', assets: [], createdAt: '2023-01-01T10:00:00Z', updatedAt: '2023-01-01T10:00:00Z' },
      { id: 'content-2', spaceId: 'my-space-id', title: 'Second Post', body: 'Content of second post', type: 'blog', creatorId: 'user1', assets: [], createdAt: '2023-01-02T11:00:00Z', updatedAt: '2023-01-02T11:00:00Z' },
    ],
  });
  if (loading) return <p>Loading content...</p>;
  if (error) return <p>Error: {error}</p>;
  return (
    <div>
      <h2>Space Contents</h2>
      <ul>
        {contents.map((content) => (
          <li key={content.id}>{content.title} ({content.type})</li>
        ))}
      </ul>
    </div>
  );
};
```

## Retrieving and Modifying a Single Content Item
This example shows how to retrieve a single content item by its ID and then update its name. It includes UI for displaying the content and a button to trigger the update.

```tsx
const SingleContentManager = () => {
  const [contentId] = useState('specific-content-id');
  const [spaceId] = useState('my-space-id');
  const [newName, setNewName] = useState('Updated Content Name');
  const { content, loading: contentLoading, error: contentError } = useContent({
    contentId,
    spaceId,
    // In a real application, you would omit mockData
    mockData: { id: 'specific-content-id', spaceId: 'my-space-id', title: 'Original Content', body: 'Some text here', type: 'document', creatorId: 'user2', assets: [], createdAt: '2023-03-15T09:00:00Z', updatedAt: '2023-03-15T09:00:00Z' },
  });
  const { updateContent, loading: updateLoading, error: updateError } = useUpdateContent();
  const handleUpdate = async () => {
    if (!content) return;
    try {
      await updateContent({
        contentId: content.id,
        spaceId: content.spaceId,
        name: newName,
      });
      alert('Content updated successfully!');
    } catch (err) {
      console.error('Failed to update content', err);
    }
  };
  if (contentLoading) return <p>Loading content item...</p>;
  if (contentError) return <p>Error loading content: {contentError}</p>;
  return (
    <div>
      <h2>Manage Content Item</h2>
      {content ? (
        <>
          <p>Current Title: {content.title}</p>
          <input
            type="text"
            value={newName}
            onChange={(e) => setNewName(e.target.value)}
            placeholder="New content name"
          />
          <button onClick={handleUpdate} disabled={updateLoading}>
            {updateLoading ? 'Updating...' : 'Update Content'}
          </button>
          {updateError && <p>Update Error: {updateError}</p>}
        </>
      ) : (
        <p>Content not found.</p>
      )}
    </div>
  );
};
```

## Creating and Deleting Content
This example illustrates how to create a new content item and subsequently delete an existing one. It includes buttons to perform these actions and displays their respective statuses.

```tsx
const ContentActions = () => {
  const { createContent, loading: createLoading, error: createError } = useCreateContent();
  const { deleteContent, loading: deleteLoading, error: deleteError } = useDeleteContent();
  const handleCreateContent = async () => {
    try {
      const newContent = await createContent({
        spaceId: 'my-space-id',
        type: 'note',
        name: 'My New Note',
        contentData: { text: 'This is a test note.' },
      });
      alert(`Content created with ID: ${newContent?.id}`);
    } catch (err) {
      console.error('Error creating content', err);
    }
  };
  const handleDeleteContent = async () => {
    const contentToDeleteId = 'content-to-delete-id'; // Replace with a real content ID
    try {
      const success = await deleteContent({
        contentId: contentToDeleteId,
        spaceId: 'my-space-id',
      });
      if (success) {
        alert(`Content ID ${contentToDeleteId} deleted successfully.`);
      } else {
        alert(`Failed to delete content ID ${contentToDeleteId}.`);
      }
    } catch (err) {
      console.error('Error deleting content', err);
    }
  };
  return (
    <div>
      <h2>Content Management Actions</h2>
      <div>
        <button onClick={handleCreateContent} disabled={createLoading}>
          {createLoading ? 'Creating...' : 'Create New Note'}
        </button>
        {createError && <p>Create Error: {createError}</p>}
      </div>
      <div style={{ marginTop: '20px' }}>
        <button onClick={handleDeleteContent} disabled={deleteLoading}>
          {deleteLoading ? 'Deleting...' : 'Delete Existing Content'}
        </button>
        {deleteError && <p>Delete Error: {deleteError}</p>}
      </div>
    </div>
  );
};